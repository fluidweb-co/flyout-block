!function(e,t){"function"==typeof define&&define.amd?define([],t()):"object"==typeof exports?module.exports=t():e.FlyoutBlock=t()}("undefined"!=typeof global?global:this.window||this.global,function(e){"use strict";function o(e){if(!e)return!1;var t=e.getAttribute(u.targetElementAttribute);return t&&""!=t?document.querySelector(t):e.closest(u.flyoutWrapperSelector)}function l(e){var t,n;e.target.closest(u.toggleButtonSelector)?(e.preventDefault(),t=e.target.closest(u.toggleButtonSelector),n=o(t),i.toggle(n)):e.target.closest(u.flyoutToggleClassSelector)?(e.target.closest(u.flyoutTogglePassActionSelector)||e.preventDefault(),(n=function(e){if(!e)return!1;for(var t=0;t<e.classList.length;t++){var n=e.classList[t];if(0==n.indexOf(u.flyoutClassTogglePrefix)){n="#"+n.replace(u.flyoutClassTogglePrefix,"");return document.querySelector(n)}}return!1}(e.target.closest(u.flyoutToggleClassSelector)))&&i.toggle(n)):e.target.closest(u.openButtonSelector)?(e.preventDefault(),t=e.target.closest(u.openButtonSelector),n=o(t),i.open(n)):e.target.closest(u.closeButtonSelector)?(e.preventDefault(),t=e.target.closest(u.closeButtonSelector),n=o(t),i.close(n)):e.target.matches(u.flyoutWrapperSelector)?(n=o(e.target),i.close(n)):e.target.closest(u.overlaySelector)&&i.closeAll()}function s(e){e.defaultPrevented||(e.key==n&&i.closeAll(),e.key!=t&&e.key!=m||!e.target.closest(u.triggerSelectors)||l(e))}function a(t,n){"boolean"!=typeof n&&(n=!1);var e=t.parentNode?t.parentNode.childNodes:null;e&&Array.from(e).forEach(function(e){e!=t&&(e.inert=n)})}var r=!1,i={managers:[]},u={},c={flyoutWrapperSelector:"[data-flyout]",flyoutContentSelector:"[data-flyout-content]",toggleButtonSelector:"[data-flyout-toggle]",openButtonSelector:"[data-flyout-open]",closeButtonSelector:"[data-flyout-close]",overlaySelector:"[data-flyout-overlay]",flyoutTogglePassActionSelector:"[data-flyout-pass-action], .js-flyout-pass-action",flyoutToggleClassSelector:".js-flyout-toggle",flyoutClassTogglePrefix:"js-flyout-target-",idPrefix:"flyout-block",headingsSelector:'h1, h2, h3, h4, h5, h6, [role="heading"]',bodyHasFlyoutClass:"has-flyout",bodyHasFlyoutOpenClass:"has-flyout--open",isActivatedClass:"is-activated",isOpenClass:"is-open",openAnimationClass:"slide-in-up",closeAnimationClass:"slide-out-down",targetElementAttribute:"data-flyout-target",openAnimationClassAttribute:"data-flyout-open-animation-class",closeAnimationClassAttribute:"data-flyout-close-animation-class",manualFocusAttribute:"data-flyout-manual-focus",descriptionAttribute:"data-flyout-description",autoFocusAttribute:"data-autofocus",focusableElementsSelector:'a[href], button:not([disabled]), input:not([disabled]):not([type="hidden"]), textarea:not([disabled]), select:not([disabled]), details, summary, iframe, object, embed, [contenteditable] [tabindex]:not([tabindex="-1"])',flyoutRoleAttribute:"data-flyout-role",overlayTemplate:'<div class="flyout-overlay" data-flyout-overlay></div>'},d="open",g="closed",t="Enter",n="Escape",m=" ",f=function(){var n={},o=!1,e=0;"[object Boolean]"===Object.prototype.toString.call(arguments[0])&&(o=arguments[0],e++);for(;e<arguments.length;e++)!function(e){for(var t in e)e.hasOwnProperty(t)&&(o&&"[object Object]"===Object.prototype.toString.call(e[t])?n[t]=f(n[t],e[t]):n[t]=e[t])}(arguments[e]);return n};i.getState=function(e){e=i.getInstance(e);return!!e&&e.state},i.open=function(e){var n=i.getInstance(e);if(!n)return!1;n.previousActiveElement=document.activeElement,AnimateHelper.doThenAnimate(e,n.settings.openAnimationClass,function(){var e,t;n.state=d,n.wasHidden=n.element.hasAttribute("hidden"),n.element.removeAttribute("hidden"),n.element.classList.add(n.settings.isOpenClass),document.body.classList.add(n.settings.bodyHasFlyoutOpenClass,n.settings.bodyHasFlyoutOpenClass+"-"+n.element.id),n.element.hasAttribute(n.settings.manualFocusAttribute)||((e=n.element.querySelector("["+n.settings.autoFocusAttribute+"]"))||0<(t=(t=Array.from((n.element||document).querySelectorAll(u.focusableElementsSelector))).filter(function(e){return!e.matches(n.settings.closeButtonSelector)})).length&&(e=t[0]),(e||n.contentElement).focus()),a(n.element,!0)})},i.close=function(e){var t=i.getInstance(e);if(!t)return!1;AnimateHelper.animateThenDo(e,t.settings.closeAnimationClass,function(){t.state=g,t.element.classList.remove(t.settings.isOpenClass),document.body.classList.remove(t.settings.bodyHasFlyoutOpenClass+"-"+t.element.id),t.wasHidden&&t.element.setAttribute("hidden",""),t.element.wasHidden=void 0,i.hasAnyElementOpen()||document.body.classList.remove(t.settings.bodyHasFlyoutOpenClass),a(t.element,!1),t.previousActiveElement&&t.previousActiveElement.focus()})},i.closeAll=function(){for(var e=0;e<i.managers.length;e++){var t=i.managers[e];i.getState(t.element)!=g&&i.close(t.element)}},i.toggle=function(e){i.getState(e)==g?i.open(e):i.close(e)},i.getInstance=function(e){for(var t,n=0;n<i.managers.length;n++){var o=i.managers[n];if(o.element==e){t=o;break}}return t},i.hasAnyElementOpen=function(){for(var e=0;e<i.managers.length;e++)if(i.managers[e].state==d)return!0;return!1},i.initializeTrigger=function(e){e.removeAttribute("disabled"),e.removeAttribute("aria-hidden"),e.setAttribute("tabindex","0"),e.setAttribute("role","button");var t=e.getAttribute("href");null!=t&&""!=t&&(document.querySelector(t)&&e.setAttribute(u.targetElementAttribute,t),e.getAttribute(u.targetElementAttribute)&&e.removeAttribute("href"))},i.initializeElement=function(e){var t={};t.element=e,t.settings=f(u),t.state=g,t.element.id&&""!=t.element.id||(t.element.id=t.settings.idPrefix+"-"+i.managers.length),t.contentElement=t.element.querySelector(t.settings.flyoutContentSelector),t.contentElement.setAttribute("tabindex",0);var n=t.element.getAttribute(t.settings.openAnimationClassAttribute),e=t.element.getAttribute(t.settings.closeAnimationClassAttribute);t.settings.openAnimationClass=n&&""!=n?n:u.openAnimationClass,t.settings.closeAnimationClass=e&&""!=e?e:u.closeAnimationClass;n="alert"==t.element.getAttribute(t.settings.flyoutRoleAttribute)||"alertdialog"==t.element.getAttribute(t.settings.flyoutRoleAttribute)?"alertdialog":"dialog";t.contentElement.setAttribute("role",n);e=t.element.getAttribute("aria-label"),n=t.element.getAttribute("aria-labelledby");e&&""!=e||n&&""!=n||(l=t.contentElement.querySelector(t.settings.headingsSelector))&&(o=null!=l.id&&""!=l.id?l.id:t.element.id+"-heading",l.id=o,t.contentElement.setAttribute("aria-labelledby",o));var o,l=t.element.getAttribute("aria-describedby");l&&""!=l||(o=t.contentElement.querySelector("["+t.settings.descriptionAttribute+"]"))&&(l=null!=o.id&&""!=o.id?o.id:t.element.id+"-description",o.id=l,t.contentElement.setAttribute("aria-describedby",l)),t.isActivated=!0,t.element.classList.add(t.settings.isActivatedClass),i.managers.push(t)};function y(e){(u=f(c,e)).triggerSelectors=u.toggleButtonSelector+", "+u.openButtonSelector+", "+u.closeButtonSelector;for(var t=document.querySelectorAll(u.flyoutWrapperSelector),n=0;n<t.length;n++)i.initializeElement(t[n]);for(var o=document.querySelectorAll(u.triggerSelectors),n=0;n<o.length;n++)i.initializeTrigger(o[n]);(e=document.createElement("div")).innerHTML=u.overlayTemplate.trim(),document.body.appendChild(e.childNodes[0]),document.addEventListener("click",l),document.addEventListener("keydown",s,!0),document.body.classList.add(u.bodyHasFlyoutClass),r=!0}return i.init=function(e){r||(window.AnimateHelper&&Element.prototype.hasOwnProperty("inert")?y(e):window.RequireBundle&&RequireBundle.require(["animate-helper","inert"],function(){y(e)}))},i});
//# sourceMappingURL=maps/flyout-block.min.js.map
