{"version":3,"file":"../flyout-block.min.js","sources":["flyout-block.js"],"sourcesContent":["/**\n * Manage states and views for the flyout blocks.\n * \n * File flyout-block.js.\n */\n(function (root, factory) {\n\tif ( typeof define === 'function' && define.amd ) {\n\t\tdefine([], factory(root));\n\t} else if ( typeof exports === 'object' ) {\n\t\tmodule.exports = factory(root);\n\t} else {\n\t\troot.FlyoutBlock = factory(root);\n\t}\n})(typeof global !== 'undefined' ? global : this.window || this.global, function (root) {\n\n\t'use strict';\n\n\tvar _hasInitialized = false;\n\tvar _publicMethods = {\n\t\tmanagers: [],\n\t};\n\tvar _settings = { };\n\tvar _defaults = {\n\t\tflyoutWrapperSelector: '[data-flyout]',\n\t\tflyoutContentSelector: '[data-flyout-content]',\n\t\ttoggleButtonSelector: '[data-flyout-toggle]',\n\t\topenButtonSelector: '[data-flyout-open]',\n\t\tcloseButtonSelector: '[data-flyout-close]',\n\t\toverlaySelector: '[data-flyout-overlay]',\n\t\tflyoutTogglePassActionSelector: '[data-flyout-pass-action], .js-flyout-pass-action',\n\n\t\tflyoutToggleClassSelector: '.js-flyout-toggle',\n\t\tflyoutClassTogglePrefix: 'js-flyout-target-',\n\t\t\n\t\tidPrefix: 'flyout-block',\n\t\t\n\t\tbodyHasFlyoutClass: 'has-flyout',\n\t\tbodyHasFlyoutOpenClass: 'has-flyout--open',\n\t\tisActivatedClass: 'is-activated',\n\t\tisOpenClass: 'is-open',\n\t\topenAnimationClass: 'slide-in-up',\n\t\tcloseAnimationClass: 'slide-out-down',\n\t\t\n\t\ttargetElementAttribute: 'data-flyout-target',\n\t\topenAnimationClassAttribute: 'data-flyout-open-animation-class',\n\t\tcloseAnimationClassAttribute: 'data-flyout-close-animation-class',\n\t\tmanualFocusAttribute: 'data-flyout-manual-focus',\n\t\tautoFocusAttribute: 'data-autofocus',\n\t\t\n\t\tflyoutRoleAttribute: 'data-flyout-role',\n\n\t\toverlayTemplate: '<div class=\"flyout-overlay\" data-flyout-overlay></div>',\n\t};\n\tvar _states = {\n\t\tOPEN: 'open',\n\t\tCLOSED: 'closed',\n\t}\n\n\n\n\t/**\n\t * Keyboard key mappings.\n\t */\n\t var _key = {\n\t\tTAB: 'Tab',\n\t\tENTER: 'Enter',\n\t\tESC: 'Escape',\n\t\tSPACE: ' ',\n\t\tEND: 'End',\n\t\tHOME: 'Home',\n\t\tARROW_LEFT: 'ArrowLeft',\n\t\tARROW_UP: 'ArrowUp',\n\t\tARROW_RIGHT: 'ArrowRight',\n\t\tARROW_DOWN: 'ArrowDown',\n\t}\n\tvar _keyMap = {\n\t\t'Tab': _key.TAB,\n\t\t'Enter': _key.ENTER,\n\t\t'Return': _key.ENTER,\n\t\t'Escape': _key.ESC,\n\t\t'Esc': _key.ESC,\n\t\t' ': _key.SPACE,\n\t\t'Spacebar': _key.SPACE,\n\t\t'End': _key.END,\n\t\t'Home': _key.HOME,\n\t\t'ArrowLeft': _key.ARROW_LEFT,\n\t\t'Left': _key.ARROW_LEFT,\n\t\t'ArrowUp': _key.ARROW_UP,\n\t\t'Up': _key.ARROW_UP,\n\t\t'ArrowRight': _key.ARROW_RIGHT,\n\t\t'Right': _key.ARROW_RIGHT,\n\t\t'ArrowDown': _key.ARROW_DOWN,\n\t\t'Down': _key.ARROW_DOWN,\n\t};\n\tvar _keyCodeMap = {\n\t\t9: 'Tab',\n\t\t13: 'Enter',\n\t\t27: 'Escape',\n\t\t32: ' ',\n\t\t35: 'End',\n\t\t36: 'Home',\n\t\t37: 'ArrowLeft',\n\t\t38: 'ArrowUp',\n\t\t39: 'ArrowRight',\n\t\t40: 'ArrowDown',\n\t}\n\n\tvar getKey = function( e ) {\n\t\tvar keycode;\n\n\t\tif ( e.key !== undefined ) {\n\t\t\tvar mappedKey = _keyMap[ e.key ];\n\t\t\tkeycode = mappedKey !== undefined ? mappedKey : e.key;\n\t\t} else if ( e.keyCode !== undefined ) {\n\t\t\tvar mappedKey = _keyMap[ _keyCodeMap[ e.keyCode ] ];\n\t\t\tkeycode = mappedKey !== undefined ? mappedKey : e.keyCode;\n\t\t}\n\n\t\treturn keycode;\n\t}\n\n\t/**\n\t * END - Keyboard key mappings.\n\t */\n\n\n\n\t/*!\n\t* Merge two or more objects together.\n\t* (c) 2017 Chris Ferdinandi, MIT License, https://gomakethings.com\n\t* @param   {Boolean}  deep     If true, do a deep (or recursive) merge [optional]\n\t* @param   {Object}   objects  The objects to merge together\n\t* @returns {Object}            Merged values of defaults and options\n\t*/\n\tvar extend = function () {\n\t\t// Variables\n\t\tvar extended = {};\n\t\tvar deep = false;\n\t\tvar i = 0;\n\n\t\t// Check if a deep merge\n\t\tif ( Object.prototype.toString.call( arguments[0] ) === '[object Boolean]' ) {\n\t\t\tdeep = arguments[0];\n\t\t\ti++;\n\t\t}\n\n\t\t// Merge the object into the extended object\n\t\tvar merge = function (obj) {\n\t\t\tfor (var prop in obj) {\n\t\t\t\tif (obj.hasOwnProperty(prop)) {\n\t\t\t\t\t// If property is an object, merge properties\n\t\t\t\t\tif (deep && Object.prototype.toString.call(obj[prop]) === '[object Object]') {\n\t\t\t\t\t\textended[prop] = extend(extended[prop], obj[prop]);\n\t\t\t\t\t} else {\n\t\t\t\t\t\textended[prop] = obj[prop];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\n\t\t// Loop through each object and conduct a merge\n\t\tfor (; i < arguments.length; i++) {\n\t\t\tvar obj = arguments[i];\n\t\t\tmerge(obj);\n\t\t}\n\n\t\treturn extended;\n\t};\n\n\n\t/**\n\t * Gets keyboard-focusable elements within a specified element\n\t *\n\t * @param   HTMLElement  element  The element to search within. Defaults to the `document` root element.\n\t *\n\t * @return  array                 All focusable elements withing the element passed.\n\t */\n\tvar getFocusableElements = function( element ) {\n\t\t// Set element to `document` root if not passed in\n\t\tif ( ! element ) { element = document; }\n\t\t\n\t\t// Get elements that are keyboard-focusable, but might be `disabled`\n\t\tvar maybeFocusableElements = element.querySelectorAll( 'a, button, input:not([type=\"hidden\"]), textarea, select, details,[tabindex]:not([tabindex=\"-1\"])' );\n\t\t\n\t\t// Filter disabled elements and return\n\t\treturn Array.from( maybeFocusableElements ).filter( function( maybeFocusable ) {\n\t\t\treturn ! maybeFocusable.hasAttribute( 'disabled' );\n\t\t} );\n\t}\n\n\n\n\t/**\n\t * Get target element\n\t */\n\tvar getTargetElement = function( element ) {\n\t\t// Bail if element not valid\n\t\tif ( ! element ) return false;\n\n\t\t// Try get target element from attributes\n\t\tvar targetSelector = element.getAttribute( _settings.targetElementAttribute );\n\t\tif ( targetSelector && targetSelector != '' ) {\n\t\t\treturn document.querySelector( targetSelector );\n\t\t}\n\n\t\t// Return target element from parent nodes\n\t\treturn element.closest( _settings.flyoutWrapperSelector );\n\t}\n\n\n\n\t/**\n\t * Get target element\n\t */\n\tvar getTargetElementFromClass = function( element ) {\n\t\tif ( ! element ) { return false; }\n\n\t\t// Iterate classes\n\t\tfor ( var i = 0; i < element.classList.length; i++ ) {\n\t\t\tvar cssClass = element.classList[i];\n\t\t\tif ( cssClass.indexOf( _settings.flyoutClassTogglePrefix ) == 0 ) {\n\t\t\t\t// Get target id from class name\n\t\t\t\tvar targetSelector = '#' + cssClass.replace( _settings.flyoutClassTogglePrefix, '' );\n\t\t\t\treturn document.querySelector( targetSelector );\n\t\t\t}\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\n\n\t/**\n\t * Handle document clicks and route to the appropriate function.\n\t */\n\tvar handleClick = function ( e ) {\n\t\t// TOGGLE\n\t\tif ( e.target.closest( _settings.toggleButtonSelector ) ) {\n\t\t\te.preventDefault();\n\t\t\tvar button = e.target.closest( _settings.toggleButtonSelector );\n\t\t\tvar element = getTargetElement( button );\n\t\t\t_publicMethods.toggle( element );\n\t\t}\n\t\t// TOGGLE (CSS CLASS)\n\t\telse if ( e.target.closest( _settings.flyoutToggleClassSelector ) ) {\n\t\t\t// Maybe prevent element's action\n\t\t\tif ( ! e.target.closest( _settings.flyoutTogglePassActionSelector ) ) {\n\t\t\t\te.preventDefault();\n\t\t\t}\n\n\t\t\tvar toggleElement = e.target.closest( _settings.flyoutToggleClassSelector );\n\t\t\tvar element = getTargetElementFromClass( toggleElement );\n\t\t\t\n\t\t\tif ( element ) {\n\t\t\t\t_publicMethods.toggle( element );\n\t\t\t}\n\t\t}\n\t\t// OPEN\n\t\telse if ( e.target.closest( _settings.openButtonSelector ) ) {\n\t\t\te.preventDefault();\n\t\t\tvar button = e.target.closest( _settings.openButtonSelector );\n\t\t\tvar element = getTargetElement( button );\n\t\t\t_publicMethods.open( element );\n\t\t}\n\t\t// CLOSE\n\t\telse if ( e.target.closest( _settings.closeButtonSelector ) ) {\n\t\t\te.preventDefault();\n\t\t\t\n\t\t\tvar button = e.target.closest( _settings.closeButtonSelector );\n\t\t\tvar element = getTargetElement( button );\n\t\t\t_publicMethods.close( element );\n\t\t}\n\t\t// OVERLAY - Specific to a flyout block\n\t\telse if ( e.target.matches( _settings.flyoutWrapperSelector ) ) {\n\t\t\tvar element = getTargetElement( e.target );\n\t\t\t_publicMethods.close( element );\n\t\t}\n\t\t// OVERLAY - General\n\t\telse if ( e.target.closest( _settings.overlaySelector ) ) {\n\t\t\t_publicMethods.closeAll();\n\t\t}\n\t}\n\n\n\n\t/**\n\t * Handle keypress event.\n\t */\n\tvar handleKeyDown = function( e ) {\n\t\t// Should do nothing if the default action has been cancelled\n\t\tif ( e.defaultPrevented ) { return; }\n\n\t\t// Get the pressed key name\n\t\tvar key = getKey( e );\n\n\t\t// Close all flyout blocks if `ESC` was pressed\n\t\tif ( key == _key.ESC ) {\n\t\t\t_publicMethods.closeAll();\n\t\t}\n\n\t\t// ENTER on flyout trigger\n\t\tif ( ( key == _key.ENTER || key == _key.SPACE ) && e.target.closest( _settings.triggerSelectors ) ) {\n\t\t\t// Similate click\n\t\t\thandleClick( e );\n\t\t}\n\t};\n\n\n\n\t/**\n\t * Get current state of element\n\t */\n\t_publicMethods.getState = function ( element ) {\n\t\tvar manager = _publicMethods.getInstance( element );\n\t\t// Bail if manager invalid\n\t\tif ( ! manager ) return false;\n\n\t\treturn manager.state;\n\t}\n\n\n\n\t/**\n\t * Open element\n\t */\n\t_publicMethods.open = function ( element ) {\n\t\tvar manager = _publicMethods.getInstance( element );\n\t\t// Bail if manager invalid\n\t\tif ( ! manager ) return false;\n\n\t\t// Save element with focus\n\t\tmanager.previousActiveElement = document.activeElement;\n\n\t\t// Set element open then play openning animation\n\t\tAnimateHelper.doThenAnimate( element, manager.settings.openAnimationClass, function() {\n\t\t\t// Set manager state\n\t\t\tmanager.state = _states.OPEN;\n\n\t\t\t// Maybe save `hidden` attribute on the flyout element\n\t\t\tmanager.wasHidden = manager.element.hasAttribute( 'hidden' );\n\t\t\tmanager.element.removeAttribute( 'hidden' );\n\n\t\t\t// Set classes\n\t\t\tmanager.element.classList.add( manager.settings.isOpenClass );\n\t\t\tdocument.body.classList.add( manager.settings.bodyHasFlyoutOpenClass,manager.settings.bodyHasFlyoutOpenClass + '-' + manager.element.id );\n\n\t\t\t// Maybe set focus to the first focusable element in the flyout content, filter out the close button\n\t\t\tif ( ! manager.element.hasAttribute( manager.settings.manualFocusAttribute ) ) {\n\t\t\t\tvar autofocusField = manager.element.querySelector( '[' + manager.settings.autoFocusAttribute + ']' );\n\n\t\t\t\tconsole.log( autofocusField );\n\n\t\t\t\t// Maybe get first focusable field\n\t\t\t\tif ( ! autofocusField ) {\n\t\t\t\t\tvar focusableElements = getFocusableElements( manager.element ).filter( function( maybeFocusable ) { return ! maybeFocusable.matches( manager.settings.closeButtonSelector ); } );\n\t\t\t\t\tif ( focusableElements.length > 0 ) {\n\t\t\t\t\t\tautofocusField = focusableElements[0];\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Maybe set focus to the field\n\t\t\t\tif ( autofocusField ) {\n\t\t\t\t\tautofocusField.focus();\n\t\t\t\t}\n\t\t\t\t// Otherwise set focus to the flyout content\n\t\t\t\telse {\n\t\t\t\t\tmanager.contentElement.focus();\n\t\t\t\t}\n\t\t\t}\n\t\t} );\n\t}\n\n\n\t\n\t/**\n\t * Close element\n\t */\n\t_publicMethods.close = function ( element ) {   \n\t\tvar manager = _publicMethods.getInstance( element );\n\t\t// Bail if manager invalid\n\t\tif ( ! manager ) return false;\n\n\t\t// Play closing animation then set element closed\n\t\tAnimateHelper.animateThenDo( element, manager.settings.closeAnimationClass, function() {\n\t\t\t// Set manager state\n\t\t\tmanager.state = _states.CLOSED;\n\n\t\t\t// Remove classes\n\t\t\tmanager.element.classList.remove( manager.settings.isOpenClass );\n\t\t\tdocument.body.classList.remove( manager.settings.bodyHasFlyoutOpenClass + '-' + manager.element.id );\n\n\t\t\t// Maybe set `hidden` attribute again\n\t\t\tif ( manager.wasHidden ) {\n\t\t\t\tmanager.element.setAttribute( 'hidden', '' );\n\t\t\t}\n\t\t\tmanager.element.wasHidden = undefined;\n\n\t\t\t// Maybe remove body class for open elements\n\t\t\tif ( ! _publicMethods.hasAnyElementOpen() ) {\n\t\t\t\tdocument.body.classList.remove( manager.settings.bodyHasFlyoutOpenClass );\n\t\t\t}\n\n\t\t\t// Set focus back to the element previously with focus\n\t\t\tif ( manager.previousActiveElement ) {\n\t\t\t\tmanager.previousActiveElement.focus();\n\t\t\t}\n\t\t} );\n\t}\n\n\n\n\t/**\n\t * Close all instances\n\t */\n\t_publicMethods.closeAll = function () {\n\t\tfor ( var i = 0; i < _publicMethods.managers.length; i++ ) {\n\t\t\tvar manager = _publicMethods.managers[i];\n\t\t\tvar currentState = _publicMethods.getState( manager.element );\n\t\t\tif ( currentState != _states.CLOSED ) {\n\t\t\t\t_publicMethods.close( manager.element );\n\t\t\t}\n\t\t}\n\t}\n\n\n\n\t/**\n\t * Toggle element state\n\t */\n\t_publicMethods.toggle = function ( element ) {\n\t\tvar currentState = _publicMethods.getState( element );\n\t\tif ( currentState == _states.CLOSED ) {\n\t\t\t_publicMethods.open( element );\n\t\t}\n\t\telse {\n\t\t\t_publicMethods.close( element );\n\t\t}\n\t}\n\n\n\n\t/**\n\t * Get manager instance for element\n\t */\n\t_publicMethods.getInstance = function ( element ) {\n\t\tvar instance;\n\t\tfor ( var i = 0; i < _publicMethods.managers.length; i++ ) {\n\t\t\tvar manager = _publicMethods.managers[i];\n\t\t\tif ( manager.element == element ) { instance = manager; break; }\n\t\t}\n\t\treturn instance;\n\t}\n\t\n\n\n\t/**\n\t * Get manager instance for element\n\t */\n\t_publicMethods.hasAnyElementOpen = function () {\n\t\tfor ( var i = 0; i < _publicMethods.managers.length; i++ ) {\n\t\t\tvar manager = _publicMethods.managers[i];\n\t\t\tif ( manager.state == _states.OPEN ) { return true; }\n\t\t}\n\t\t\n\t\treturn false;\n\t}\n\n\n\n\t/**\n\t * Initialize a trigger elements.\n\t */\n\t _publicMethods.initializeTrigger = function( trigger ) {\n\t\t// Enable the trigger element\n\t\ttrigger.removeAttribute( 'disabled' );\n\t\ttrigger.removeAttribute( 'aria-hidden' );\n\t\t\n\t\t// Add the element to the natural tab order\n\t\ttrigger.setAttribute( 'tabindex', '0' );\n\n\t\t// Set trigger role to `button`\n\t\ttrigger.setAttribute( 'role', 'button' );\n\n\t\t// Maybe remove the `href` attribute to avoid right-click to open link on new tab\n\t\tvar triggerHref = trigger.getAttribute( 'href' );\n\t\tif ( triggerHref != undefined && triggerHref != '' ) {\n\t\t\t\n\t\t\t// Move selector to the target attribute\n\t\t\tvar targetElement = document.querySelector( triggerHref )\n\t\t\tif ( targetElement ) {\n\t\t\t\ttrigger.setAttribute( _settings.targetElementAttribute, triggerHref );\n\t\t\t}\n\n\t\t\t// Only remove the `href` attribute if the element has a target\n\t\t\tif ( trigger.getAttribute( _settings.targetElementAttribute ) ) {\n\t\t\t\ttrigger.removeAttribute( 'href' );\n\t\t\t}\n\n\t\t}\n\t}\n\t\n\n\n\t/**\n\t * Initialize an element\n\t */\n\t_publicMethods.initializeElement = function( element ) {\n\t\tvar manager = {};\n\t\tmanager.element = element;\n\t\tmanager.settings = extend( _settings );\n\t\tmanager.state = _states.CLOSED;\n\n\t\t// Maybe create element ID\n\t\tif ( ! manager.element.id || manager.element.id == '' ) {\n\t\t\tmanager.element.id = manager.settings.idPrefix + '-' + _publicMethods.managers.length;\n\t\t}\n\n\t\t// Get the content element\n\t\tmanager.contentElement = manager.element.querySelector( manager.settings.flyoutContentSelector );\n\t\t\n\t\t// Try get open/close animation classes from attributes\n\t\tvar openAnimationAttrValue = manager.element.getAttribute( manager.settings.openAnimationClassAttribute );\n\t\tvar closeAnimationAttrValue = manager.element.getAttribute( manager.settings.closeAnimationClassAttribute );\n\t\tmanager.settings.openAnimationClass = openAnimationAttrValue && openAnimationAttrValue != '' ? openAnimationAttrValue : _settings.openAnimationClass;\n\t\tmanager.settings.closeAnimationClass = closeAnimationAttrValue && closeAnimationAttrValue != '' ? closeAnimationAttrValue : _settings.closeAnimationClass;\n\n\t\t// Set flyout content `role` attribute from data attributes\n\t\tvar roleAttrValue = manager.element.getAttribute( manager.settings.flyoutRoleAttribute ) == 'alert' || manager.element.getAttribute( manager.settings.flyoutRoleAttribute ) == 'alertdialog' ? 'alertdialog' : 'dialog';\n\t\tmanager.contentElement.setAttribute( 'role', roleAttrValue );\n\t\t\n\t\t// Set element as activated\n\t\tmanager.isActivated = true;\n\t\tmanager.element.classList.add( manager.settings.isActivatedClass );\n\t\t\n\t\t// Add manager to public methods\n\t\t_publicMethods.managers.push( manager );\n\t}\n\n\n\n\t/**\n\t * Finish Initialize\n\t */\n\t var finishInit = function( options ) {\n\t\t// Merge with general settings with options\n\t\t_settings = extend( _defaults, options );\n\n\t\t// Set dynamic settings value\n\t\t_settings.triggerSelectors = _settings.toggleButtonSelector + ', ' + _settings.openButtonSelector + ', ' + _settings.closeButtonSelector;\n\n\t\t// Iterate elements\n\t\tvar elements = document.querySelectorAll( _settings.flyoutWrapperSelector );\n\t\tfor ( var i = 0; i < elements.length; i++ ) {\n\t\t\t_publicMethods.initializeElement( elements[ i ] );\n\t\t}\n\n\t\t// Iterate trigger elements\n\t\tvar triggers = document.querySelectorAll( _settings.triggerSelectors );\n\t\tfor ( var i = 0; i < triggers.length; i++ ) {\n\t\t\t_publicMethods.initializeTrigger( triggers[ i ] );\n\t\t}\n\n\t\t// Add flyout overlay\n\t\tvar overlayElement = document.createElement('div');\n\t\toverlayElement.innerHTML = _settings.overlayTemplate.trim();\n\t\tdocument.body.appendChild( overlayElement.childNodes[0] );\n\n\t\t// Add event listeners\n\t\tdocument.addEventListener( 'click', handleClick );\n\t\tdocument.addEventListener( 'keydown', handleKeyDown, true );\n\t\t\n\t\t// Add body class\n\t\tdocument.body.classList.add( _settings.bodyHasFlyoutClass );\n\n\t\t_hasInitialized = true;\n\t}\n\n\t\n\n\t/**\n\t * Initialize Script.\n\t */\n\t_publicMethods.init = function( options ) {\n\t\tif ( _hasInitialized ) return;\n\n\t\t// Finish initialization, maybe load dependencies first\n\t\tif ( window.AnimateHelper ) {\n\t\t\tfinishInit( options );\n\t\t}\n\t\telse if( window.RequireBundle ) {\n\t\t\tRequireBundle.require( [ 'animate-helper' ], function() { finishInit( options ); } );\n\t\t}\n\t};\n\n\n\n\t//\n\t// Public APIs\n\t//\n\treturn _publicMethods;\n\n});\n"],"names":["root","factory","define","amd","exports","module","FlyoutBlock","global","this","window","getTargetElement","element","targetSelector","getAttribute","_settings","targetElementAttribute","document","querySelector","closest","flyoutWrapperSelector","handleClick","e","button","target","toggleButtonSelector","preventDefault","_publicMethods","toggle","flyoutToggleClassSelector","flyoutTogglePassActionSelector","i","classList","length","cssClass","indexOf","flyoutClassTogglePrefix","replace","getTargetElementFromClass","openButtonSelector","open","closeButtonSelector","close","matches","overlaySelector","closeAll","handleKeyDown","keycode","mappedKey","defaultPrevented","undefined","key","_keyMap","keyCode","_keyCodeMap","_key","triggerSelectors","_hasInitialized","managers","_defaults","flyoutContentSelector","idPrefix","bodyHasFlyoutClass","bodyHasFlyoutOpenClass","isActivatedClass","isOpenClass","openAnimationClass","closeAnimationClass","openAnimationClassAttribute","closeAnimationClassAttribute","manualFocusAttribute","autoFocusAttribute","flyoutRoleAttribute","overlayTemplate","_states","Tab","Enter","Return","Escape","Esc"," ","Spacebar","End","Home","ArrowLeft","Left","ArrowUp","Up","ArrowRight","Right","ArrowDown","Down","9","13","27","32","35","36","37","38","39","40","extend","extended","deep","Object","prototype","toString","call","arguments","obj","prop","hasOwnProperty","merge","getState","manager","getInstance","state","previousActiveElement","activeElement","AnimateHelper","doThenAnimate","settings","autofocusField","focusableElements","wasHidden","hasAttribute","removeAttribute","add","body","id","console","log","maybeFocusableElements","querySelectorAll","Array","from","filter","maybeFocusable","getFocusableElements","contentElement","focus","animateThenDo","remove","setAttribute","hasAnyElementOpen","instance","initializeTrigger","trigger","triggerHref","initializeElement","openAnimationAttrValue","closeAnimationAttrValue","roleAttrValue","isActivated","push","finishInit","options","elements","triggers","overlayElement","createElement","innerHTML","trim","appendChild","childNodes","addEventListener","init","RequireBundle","require"],"mappings":"CAKA,SAAWA,EAAMC,GACO,mBAAXC,QAAyBA,OAAOC,IAC3CD,OAAO,GAAID,KACmB,iBAAZG,QAClBC,OAAOD,QAAUH,IAEjBD,EAAKM,YAAcL,IANrB,CAQqB,oBAAXM,OAAyBA,OAASC,KAAKC,QAAUD,KAAKD,OAAQ,SAAUP,gBAsL1D,SAAnBU,EAA6BC,GAEhC,IAAOA,EAAU,OAAO,EAGxB,IAAIC,EAAiBD,EAAQE,aAAcC,EAAUC,wBACrD,OAAKH,GAAoC,IAAlBA,EACfI,SAASC,cAAeL,GAIzBD,EAAQO,QAASJ,EAAUK,uBA4BjB,SAAdC,EAAyBC,GAE5B,IA+BKC,EAMAX,EArCAU,EAAEE,OAAOL,QAASJ,EAAUU,uBAChCH,EAAEI,iBACEH,EAASD,EAAEE,OAAOL,QAASJ,EAAUU,sBACrCb,EAAUD,EAAkBY,GAChCI,EAAeC,OAAQhB,IAGdU,EAAEE,OAAOL,QAASJ,EAAUc,4BAE9BP,EAAEE,OAAOL,QAASJ,EAAUe,iCAClCR,EAAEI,kBAICd,EApC0B,SAAUA,GACzC,IAAOA,EAAY,OAAO,EAG1B,IAAM,IAAImB,EAAI,EAAGA,EAAInB,EAAQoB,UAAUC,OAAQF,IAAM,CACpD,IAAIG,EAAWtB,EAAQoB,UAAUD,GACjC,GAA8D,GAAzDG,EAASC,QAASpB,EAAUqB,yBAAiC,CAE7DvB,EAAiB,IAAMqB,EAASG,QAAStB,EAAUqB,wBAAyB,IAChF,OAAOnB,SAASC,cAAeL,IAIjC,OAAO,EAuBQyB,CADMhB,EAAEE,OAAOL,QAASJ,EAAUc,8BAI/CF,EAAeC,OAAQhB,IAIfU,EAAEE,OAAOL,QAASJ,EAAUwB,qBACrCjB,EAAEI,iBACEH,EAASD,EAAEE,OAAOL,QAASJ,EAAUwB,oBACrC3B,EAAUD,EAAkBY,GAChCI,EAAea,KAAM5B,IAGZU,EAAEE,OAAOL,QAASJ,EAAU0B,sBACrCnB,EAAEI,iBAEEH,EAASD,EAAEE,OAAOL,QAASJ,EAAU0B,qBACrC7B,EAAUD,EAAkBY,GAChCI,EAAee,MAAO9B,IAGbU,EAAEE,OAAOmB,QAAS5B,EAAUK,wBACjCR,EAAUD,EAAkBW,EAAEE,QAClCG,EAAee,MAAO9B,IAGbU,EAAEE,OAAOL,QAASJ,EAAU6B,kBACrCjB,EAAekB,WASG,SAAhBC,EAA0BxB,GAE7B,IAtLsBA,EAKrByB,EAEIC,EA+KA1B,EAAE2B,wBAnLQC,KAHO5B,EAyLJA,GAtLX6B,IAENJ,OAAwBG,KADpBF,EAAYI,EAAS9B,EAAE6B,MACSH,EAAY1B,EAAE6B,SACzBD,IAAd5B,EAAE+B,UAEbN,OAAwBG,KADpBF,EAAYI,EAASE,EAAahC,EAAE+B,WACJL,EAAY1B,EAAE+B,UAiL/CF,EA9KGJ,IAiLKQ,GACX5B,EAAekB,WAITM,GAAOI,GAAcJ,GAAOI,IAAgBjC,EAAEE,OAAOL,QAASJ,EAAUyC,mBAE9EnC,EAAaC,IA7Rf,IAAImC,GAAkB,EAClB9B,EAAiB,CACpB+B,SAAU,IAEP3C,EAAY,GACZ4C,EAAY,CACfvC,sBAAuB,gBACvBwC,sBAAuB,wBACvBnC,qBAAsB,uBACtBc,mBAAoB,qBACpBE,oBAAqB,sBACrBG,gBAAiB,wBACjBd,+BAAgC,oDAEhCD,0BAA2B,oBAC3BO,wBAAyB,oBAEzByB,SAAU,eAEVC,mBAAoB,aACpBC,uBAAwB,mBACxBC,iBAAkB,eAClBC,YAAa,UACbC,mBAAoB,cACpBC,oBAAqB,iBAErBnD,uBAAwB,qBACxBoD,4BAA6B,mCAC7BC,6BAA8B,oCAC9BC,qBAAsB,2BACtBC,mBAAoB,iBAEpBC,oBAAqB,mBAErBC,gBAAiB,0DAEdC,EACG,OADHA,EAEK,SAQJnB,EAEG,QAFHA,EAGC,SAHDA,EAIG,IAJHA,EAOQ,YAPRA,EAQM,UARNA,EASS,aATTA,EAUQ,YAETH,EAAU,CACbuB,IAZK,MAaLC,MAASrB,EACTsB,OAAUtB,EACVuB,OAAUvB,EACVwB,IAAOxB,EACPyB,IAAKzB,EACL0B,SAAY1B,EACZ2B,IAfK,MAgBLC,KAfM,OAgBNC,UAAa7B,EACb8B,KAAQ9B,EACR+B,QAAW/B,EACXgC,GAAMhC,EACNiC,WAAcjC,EACdkC,MAASlC,EACTmC,UAAanC,EACboC,KAAQpC,GAELD,EAAc,CACjBsC,EAAG,MACHC,GAAI,QACJC,GAAI,SACJC,GAAI,IACJC,GAAI,MACJC,GAAI,OACJC,GAAI,YACJC,GAAI,UACJC,GAAI,aACJC,GAAI,aA8BDC,EAAS,WAEZ,IAAIC,EAAW,GACXC,GAAO,EACPzE,EAAI,EAGgD,qBAAnD0E,OAAOC,UAAUC,SAASC,KAAMC,UAAU,MAC9CL,EAAOK,UAAU,GACjB9E,KAkBD,KAAOA,EAAI8E,UAAU5E,OAAQF,KAdjB,SAAU+E,GACrB,IAAK,IAAIC,KAAQD,EACZA,EAAIE,eAAeD,KAElBP,GAAsD,oBAA9CC,OAAOC,UAAUC,SAASC,KAAKE,EAAIC,IAC9CR,EAASQ,GAAQT,EAAOC,EAASQ,GAAOD,EAAIC,IAE5CR,EAASQ,GAAQD,EAAIC,IASxBE,CADUJ,UAAU9E,IAIrB,OAAOwE,GAiJR5E,EAAeuF,SAAW,SAAWtG,GAChCuG,EAAUxF,EAAeyF,YAAaxG,GAE1C,QAAOuG,GAEAA,EAAQE,OAQhB1F,EAAea,KAAO,SAAW5B,GAChC,IAAIuG,EAAUxF,EAAeyF,YAAaxG,GAE1C,IAAOuG,EAAU,OAAO,EAGxBA,EAAQG,sBAAwBrG,SAASsG,cAGzCC,cAAcC,cAAe7G,EAASuG,EAAQO,SAASxD,mBAAoB,WAa1E,IACKyD,EAMCC,EAlBNT,EAAQE,MAAQ3C,EAGhByC,EAAQU,UAAYV,EAAQvG,QAAQkH,aAAc,UAClDX,EAAQvG,QAAQmH,gBAAiB,UAGjCZ,EAAQvG,QAAQoB,UAAUgG,IAAKb,EAAQO,SAASzD,aAChDhD,SAASgH,KAAKjG,UAAUgG,IAAKb,EAAQO,SAAS3D,uBAAuBoD,EAAQO,SAAS3D,uBAAyB,IAAMoD,EAAQvG,QAAQsH,IAG9Hf,EAAQvG,QAAQkH,aAAcX,EAAQO,SAASpD,wBACjDqD,EAAiBR,EAAQvG,QAAQM,cAAe,IAAMiG,EAAQO,SAASnD,mBAAqB,KAEhG4D,QAAQC,IAAKT,GAGNA,GAE0B,GAD5BC,EAhLmB,SAAUhH,GAKhCyH,GAHezH,EAAZA,GAAsBK,UAGQqH,iBAAkB,oGAGvD,OAAOC,MAAMC,KAAMH,GAAyBI,OAAQ,SAAUC,GAC7D,OAASA,EAAeZ,aAAc,cAuKZa,CAAsBxB,EAAQvG,SAAU6H,OAAQ,SAAUC,GAAmB,OAASA,EAAe/F,QAASwE,EAAQO,SAASjF,wBAChIR,SACtB0F,EAAiBC,EAAkB,KAKhCD,GAKJR,EAAQyB,gBAJOC,YAenBlH,EAAee,MAAQ,SAAW9B,GACjC,IAAIuG,EAAUxF,EAAeyF,YAAaxG,GAE1C,IAAOuG,EAAU,OAAO,EAGxBK,cAAcsB,cAAelI,EAASuG,EAAQO,SAASvD,oBAAqB,WAE3EgD,EAAQE,MAAQ3C,EAGhByC,EAAQvG,QAAQoB,UAAU+G,OAAQ5B,EAAQO,SAASzD,aACnDhD,SAASgH,KAAKjG,UAAU+G,OAAQ5B,EAAQO,SAAS3D,uBAAyB,IAAMoD,EAAQvG,QAAQsH,IAG3Ff,EAAQU,WACZV,EAAQvG,QAAQoI,aAAc,SAAU,IAEzC7B,EAAQvG,QAAQiH,eAAY3E,EAGrBvB,EAAesH,qBACrBhI,SAASgH,KAAKjG,UAAU+G,OAAQ5B,EAAQO,SAAS3D,wBAI7CoD,EAAQG,uBACZH,EAAQG,sBAAsBuB,WAUjClH,EAAekB,SAAW,WACzB,IAAM,IAAId,EAAI,EAAGA,EAAIJ,EAAe+B,SAASzB,OAAQF,IAAM,CAC1D,IAAIoF,EAAUxF,EAAe+B,SAAS3B,GACnBJ,EAAeuF,SAAUC,EAAQvG,UAC/B8D,GACpB/C,EAAee,MAAOyE,EAAQvG,WAUjCe,EAAeC,OAAS,SAAWhB,GACfe,EAAeuF,SAAUtG,IACvB8D,EACpB/C,EAAea,KAAM5B,GAGrBe,EAAee,MAAO9B,IASxBe,EAAeyF,YAAc,SAAWxG,GAEvC,IADA,IAAIsI,EACMnH,EAAI,EAAGA,EAAIJ,EAAe+B,SAASzB,OAAQF,IAAM,CAC1D,IAAIoF,EAAUxF,EAAe+B,SAAS3B,GACtC,GAAKoF,EAAQvG,SAAWA,EAAU,CAAEsI,EAAW/B,EAAS,OAEzD,OAAO+B,GAQRvH,EAAesH,kBAAoB,WAClC,IAAM,IAAIlH,EAAI,EAAGA,EAAIJ,EAAe+B,SAASzB,OAAQF,IAEpD,GADcJ,EAAe+B,SAAS3B,GACzBsF,OAAS3C,EAAiB,OAAO,EAG/C,OAAO,GAQP/C,EAAewH,kBAAoB,SAAUC,GAE7CA,EAAQrB,gBAAiB,YACzBqB,EAAQrB,gBAAiB,eAGzBqB,EAAQJ,aAAc,WAAY,KAGlCI,EAAQJ,aAAc,OAAQ,UAG9B,IAAIK,EAAcD,EAAQtI,aAAc,QACpBoC,MAAfmG,GAA2C,IAAfA,IAGZpI,SAASC,cAAemI,IAE3CD,EAAQJ,aAAcjI,EAAUC,uBAAwBqI,GAIpDD,EAAQtI,aAAcC,EAAUC,yBACpCoI,EAAQrB,gBAAiB,UAW5BpG,EAAe2H,kBAAoB,SAAU1I,GAC5C,IAAIuG,EAAU,GACdA,EAAQvG,QAAUA,EAClBuG,EAAQO,SAAWpB,EAAQvF,GAC3BoG,EAAQE,MAAQ3C,EAGTyC,EAAQvG,QAAQsH,IAA4B,IAAtBf,EAAQvG,QAAQsH,KAC5Cf,EAAQvG,QAAQsH,GAAKf,EAAQO,SAAS7D,SAAW,IAAMlC,EAAe+B,SAASzB,QAIhFkF,EAAQyB,eAAiBzB,EAAQvG,QAAQM,cAAeiG,EAAQO,SAAS9D,uBAGzE,IAAI2F,EAAyBpC,EAAQvG,QAAQE,aAAcqG,EAAQO,SAAStD,6BACxEoF,EAA0BrC,EAAQvG,QAAQE,aAAcqG,EAAQO,SAASrD,8BAC7E8C,EAAQO,SAASxD,mBAAqBqF,GAAoD,IAA1BA,EAA+BA,EAAyBxI,EAAUmD,mBAClIiD,EAAQO,SAASvD,oBAAsBqF,GAAsD,IAA3BA,EAAgCA,EAA0BzI,EAAUoD,oBAGlIsF,EAAwF,SAAxEtC,EAAQvG,QAAQE,aAAcqG,EAAQO,SAASlD,sBAA4G,eAAxE2C,EAAQvG,QAAQE,aAAcqG,EAAQO,SAASlD,qBAAyC,cAAgB,SAC/M2C,EAAQyB,eAAeI,aAAc,OAAQS,GAG7CtC,EAAQuC,aAAc,EACtBvC,EAAQvG,QAAQoB,UAAUgG,IAAKb,EAAQO,SAAS1D,kBAGhDrC,EAAe+B,SAASiG,KAAMxC,IAQb,SAAbyC,EAAuBC,IAE3B9I,EAAYuF,EAAQ3C,EAAWkG,IAGrBrG,iBAAmBzC,EAAUU,qBAAuB,KAAOV,EAAUwB,mBAAqB,KAAOxB,EAAU0B,oBAIrH,IADA,IAAIqH,EAAW7I,SAASqH,iBAAkBvH,EAAUK,uBAC1CW,EAAI,EAAGA,EAAI+H,EAAS7H,OAAQF,IACrCJ,EAAe2H,kBAAmBQ,EAAU/H,IAK7C,IADA,IAAIgI,EAAW9I,SAASqH,iBAAkBvH,EAAUyC,kBAC1CzB,EAAI,EAAGA,EAAIgI,EAAS9H,OAAQF,IACrCJ,EAAewH,kBAAmBY,EAAUhI,KAIzCiI,EAAiB/I,SAASgJ,cAAc,QAC7BC,UAAYnJ,EAAU0D,gBAAgB0F,OACrDlJ,SAASgH,KAAKmC,YAAaJ,EAAeK,WAAW,IAGrDpJ,SAASqJ,iBAAkB,QAASjJ,GACpCJ,SAASqJ,iBAAkB,UAAWxH,GAAe,GAGrD7B,SAASgH,KAAKjG,UAAUgG,IAAKjH,EAAU+C,oBAEvCL,GAAkB,EAyBnB,OAjBA9B,EAAe4I,KAAO,SAAUV,GAC1BpG,IAGA/C,OAAO8G,cACXoC,EAAYC,GAEJnJ,OAAO8J,eACfA,cAAcC,QAAS,CAAE,kBAAoB,WAAab,EAAYC,OASjElI"}